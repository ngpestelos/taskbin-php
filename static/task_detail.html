$def with (task)

$var title = "Task Details"
$ bgclass = "stuff"
$if task['type'] == 'trash':
  $ bgclass = 'trash'
$elif task['type'] == 'someday':
  $ bgclass = 'someday'
$elif task['type'] == 'next':
  $ bgclass = 'next'

$ tags = []
$if 'tags' in task:
  $ tags = task['tags']

$ tags.sort()

$ id = task['_id']

<div id="content" class="span-18">
  <div id="task" class="$bgclass">
    <h3>$task['name']</h3>
    <p class="posted">$task['posted']</p>
  </div>
  <div id="cform">
    <form action="/comment" method="post">
      <input type="text" size="64" maxlength="64" name="comment"
        id="comment" />
      <input id="post" type="submit" value="Comment" />
      <input type="hidden" name="task" value="$id" />
    </form>
  </div>
</div>
<div id="sidebar" class="span-6 last">
  <div id="moveto">
    <h4>Move to:</h4>
    $if task['type'] != 'trash':
      <p><a href="/move/$task['_id']?trash">Trash</a></p>
    $if task['type'] != 'someday':
      <p><a href="/move/$task['_id']?someday">Someday</a></p>
    $if task['type'] != 'next':
      <p><a href="/move/$task['_id']?next">Next</a></p>
  </div>
  <div id="tform">
    <form action="/tag" method="post">
      <input type="text" name="tag" />
      <input type="submit" value="Tag" />
      <input type="hidden" name="task" value="$task.id" />
    </form>
  </div>
  $if tags:
    <div id="tags">
      <h4>Tags</h4>
      <ul>
        $for name in tags:
        <li>$name</li>
      </ul>
    </div>
</div>
